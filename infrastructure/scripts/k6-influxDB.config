[agent]
  interval = "1s"
  flush_interval = "1s"

[[inputs.influxdb_listener]]
  ## Address and port to host InfluxDB listener on
  service_address = ":8186"

  ## maximum duration before timing out read of the request
  read_timeout = "10s"
  ## maximum duration before timing out write of the response
  write_timeout = "10s"

  ## Maximum allowed HTTP request body size in bytes.
  ## 0 means to use the default of 32MiB.
  max_body_size = "32MiB"

[[aggregators.basicstats]]
  ## The period on which to flush & clear the aggregator.
  period = "5s"

  ## If true, the original metric will be dropped by the
  ## aggregator and will not get sent to the output plugins.
  drop_original = true

  ## Configures which basic stats to push as fields
  # stats = ["count","diff","rate","min","max","mean","non_negative_diff","non_negative_rate","stdev","s2","sum","interval"]
  stats = ["mean", "min", "max", "sum"]

[[outputs.http]]
  url = "http://localhost:3000/api/live/push/custom_stream_id"
  data_format = "influx"
  [outputs.http.headers]
    Authorization = "Bearer eyJrIjoiU1g1NVJCWVBUcnFHVnkxc2tReFRLTzVsckJJRkJrVGoiLCJuIjoibWlhamltIiwiaWQiOjF9"

[[outputs.file]]
  files = ["stdout", "./metrics.out"]
  data_format = "json"
  json_timestamp_units = "1s"